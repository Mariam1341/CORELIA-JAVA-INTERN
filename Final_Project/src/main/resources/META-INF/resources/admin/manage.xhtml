<ui:composition template="/dashboard.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"        
                >

    <ui:define name="content">
        <h2 class="text-center mb-4" style="color:#4CAF50;">Manage Users</h2>
<div class="width-control">
        <h:form id="userForm">
<p:dataTable value="#{userBean.allUsers}" var="user"
             styleClass="table table-hover"
         
             responsiveLayout="scroll"
         >
>


                <p:column headerText="Username" style="width:25%;">
                    <h:outputText value="#{user.username}" />
                </p:column>

                <p:column headerText="Role" style="width:25%;">
                      <h:outputText value="#{user.role}"
                  styleClass="#{user.role eq 'ADMIN' ? 'badge bg-success' : 'badge bg-info'}" />

                </p:column>

                <p:column headerText="Actions" style="width:50%; text-align:center;">
                    <p:commandButton value="Make Admin" styleClass="btn btn-success me-2"
                 rendered="#{user.role ne 'ADMIN'}"
                 actionListener="#{userBean.makeAdmin(user.username)}"
                 update="userForm">
 
</p:commandButton>

<p:commandButton value="Delete" styleClass="btn btn-danger"
                 actionListener="#{userBean.deleteUser(user.username)}"
                 update="userForm"
                 onclick="return confirm('Are you sure?');">
    
</p:commandButton>

                                     
                </p:column>

            </p:dataTable>
        </h:form>
        </div>
    </ui:define>
</ui:composition>

