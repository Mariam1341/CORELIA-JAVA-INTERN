<ui:composition template="/dashboard.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="content">
        <h2 class="text-center mb-4" style="color:#4CAF50;">Manage Users</h2>

        <h:form id="userForm">
<p:dataTable value="#{userBean.allUsers}" var="user"
             styleClass="table table-hover"
         
             responsiveLayout="scroll"
         >
>


                <p:column headerText="Username" style="width:25%;">
                    <h:outputText value="#{user.username}" />
                </p:column>

                <p:column headerText="Role" style="width:25%;">
                      <h:outputText value="#{user.role}"
                  styleClass="#{user.role eq 'ADMIN' ? 'badge bg-success' : 'badge bg-info'}" />

                </p:column>

                <p:column headerText="Actions" style="width:50%; text-align:center;">
                    <p:commandButton value="Make Admin" icon="pi pi-user-plus" 
                                     rendered="#{user.role ne 'ADMIN'}"
                                     actionListener="#{userBean.makeAdmin(user.username)}"
                                     update="userForm"
                                     styleClass="ui-button-success mr-2" />

                    <p:commandButton value="Delete" icon="pi pi-trash" 
                                     actionListener="#{userBean.deleteUser(user.username)}"
                                     update="userForm"
                                     styleClass="ui-button-danger"
                                     onclick="return confirm('Are you sure you want to delete this user?');"/>
                </p:column>

            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>

